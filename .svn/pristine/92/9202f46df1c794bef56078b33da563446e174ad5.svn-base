(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{204:function(t,i,e){},215:function(t,i,e){},402:function(t,i,e){"use strict";e.r(i);var o=e(2),n=e(3),a=e(4),s=e(5),r=e(14),c=e(13),u=e(0),l=e.n(u),d=(e(204),Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}),m=(n.a,a.a,s.a,r.a,c.a,d({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(o.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}),h={name:"add-house",components:{Group:n.a,Cell:a.a,CellBox:s.a,Datetime:r.a,XInput:c.a},data:function(){return{houseId:"",type:"",house:null,form:{area:"",date:"",buyPrice:""}}},computed:m({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(o.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),methods:{clear:function(){this.form={area:"",date:"",buyPrice:""},this.type="",this.house=null,this.$store.commit("updateFormCommunityStatus",null),this.$store.commit("updateFormCityStatus",this.location)},showLoading:function(){this.$store.commit("updateLoadingStatus",{isLoading:!0})},hideLoading:function(t){this.$store.commit("updateLoadingStatus",{isLoading:!1}),2==t?this.$store.commit("updateWarnToastStatus"):this.$store.commit("updateToastStatus")},del:function(){var t=this;this.showLoading(),this.$http({url:"WxHouse/deleteHouse",method:"post",data:{houseId:this.$route.query.houseId}}).then(function(i){1==i.data.statusCode&&(t.hideLoading(),t.$router.replace({path:"/myHouse"}))})},areaCheck:function(t){return isNaN(1*t)?{valid:!1,msg:"请输入数字"}:{valid:!0}},log:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,i)},change:function(){},onConfirm:function(t){console.log("on-confirm arg",t)},onCancel:function(){},submit:function(){var t=this;if(this.is_finish){this.showLoading();var i={cityId:this.city.cityId,cityName:this.city.cityName,communityId:this.community.communityId,communityName:this.community.communityname,districtId:this.community.districtId,districtName:this.community.districtName,provinceId:this.city.provinceId||"",provinceName:this.city.provinceName||"",address:this.community.detailaddress||"",buildingsquare:this.form.area,buyTime:this.form.date+"-01",buyPrice:this.form.buyPrice};"edit"==this.type&&(i.houseId=this.houseId),this.$http({url:"WxHouse/addHouse",method:"post",data:i}).then(function(i){1==i.data.statusCode&&(t.hideLoading(),t.$router.push({path:"/house",query:{houseId:i.data.data}}))})}},load:function(){var t=this;this.$http({method:"post",url:"/WxHouse/getHouseInfo",data:{houseId:this.houseId}}).then(function(i){console.log(i.data);var e=i.data.data;t.house=l.a.cloneDeep(e);var o={cityId:e.cityId,cityName:e.cityName,districtId:e.districtId,districtName:e.districtName,communityId:e.communityId,communityname:e.communityName,detailaddress:e.address},n={cityId:e.cityId,cityName:e.cityName,districtId:e.districtId,districtName:e.districtName};t.$store.commit("updateFormCommunityStatus",o),t.$store.commit("updateFormCityStatus",n),t.form={area:e.buildingsquare,date:e.buyTime.substr(0,e.buyTime.length-3),buyPrice:e.buyPrice}})}},beforeRouteLeave:function(t,i,e){console.log(t.path),"/city"!=t.path&&"/search"!=t.path&&this.clear(),e()},activated:function(){"edit"==this.$route.query.type?(this.type="edit",this.houseId=this.$route.query.houseId,this.house||this.load()):void 0!==this.$route.query.buildingsquare&&(this.form={area:this.$route.query.buildingsquare,date:"",buyPrice:""})},mounted:function(){}},f=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"add_house_page"},[e("group",{attrs:{gutter:0}},[e("cell",{attrs:{title:"选择城市",value:t.city.cityName||"请选择","is-link":"",link:{path:"/city",query:{type:2}}}}),t._v(" "),e("cell",{attrs:{title:"房产地址",value:"请选择","is-link":"",link:{path:"/search",query:{type:2}}}},[t.community?[e("div",[t._v(t._s(t.community.communityname))]),t._v(" "),t.community.detailaddress?e("div",{staticStyle:{"margin-top":"0.1rem"}},[t._v(t._s(t.community.detailaddress))]):t._e()]:t._e()],2),t._v(" "),e("x-input",{attrs:{title:"建筑面积","text-align":"right","is-type":t.areaCheck,"show-clear":!1},model:{value:t.form.area,callback:function(i){t.$set(t.form,"area",i)},expression:"form.area"}},[e("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("㎡")])]),t._v(" "),e("datetime",{attrs:{format:"YYYY-MM",title:"购入时间",placeholder:"选择日期"},on:{"on-change":t.change,"on-cancel":t.onCancel,"on-confirm":t.onConfirm,"on-hide":function(i){t.log("hide",i)}},model:{value:t.form.date,callback:function(i){t.$set(t.form,"date",i)},expression:"form.date"}}),t._v(" "),e("x-input",{attrs:{title:"购入价格","text-align":"right","is-type":t.areaCheck,"show-clear":!1},model:{value:t.form.buyPrice,callback:function(i){t.$set(t.form,"buyPrice",i)},expression:"form.buyPrice"}},[e("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("万")])])],1),t._v(" "),e("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!t.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:t.submit}},[t._v("立即评估")]),t._v(" "),"edit"==t.type?e("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:t.del}},[t._v("删除房产")]):t._e()],1)};f._withStripped=!0;var y=e(1),p=Object(y.a)(h,f,[],!1,null,null,null);p.options.__file="src/pages/index/home/views/add_house.vue";i.default=p.exports},5:function(t,i,e){"use strict";var o=e(22),n=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(o.a)(this.link,this.$router)}}}),a=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)};a._withStripped=!0;var s=e(1),r=!1;var c=function(t){r||e(215)},u=Object(s.a)(n,a,[],!1,c,null,null);u.options.__file="node_modules/vux/src/components/cell-box/index.vue";i.a=u.exports}}]);
//# sourceMappingURL=31.js.map