(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{207:function(t,e,i){},218:function(t,e,i){},406:function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(3),a=i(4),s=i(5),r=i(13),c=i(12),u=i(0),l=i.n(u),m=(i(207),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),d=(o.a,a.a,s.a,r.a,c.a,m({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(n.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),h={name:"add-house",components:{Group:o.a,Cell:a.a,CellBox:s.a,Datetime:r.a,XInput:c.a},data:function(){return{houseId:"",type:"",house:null,form:{area:"",date:"",buyPrice:""}}},computed:d({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(n.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),methods:{clear:function(){this.form={area:"",date:"",buyPrice:""},this.type="",this.house=null,this.$store.commit("updateFormCommunityStatus",null),this.$store.commit("updateFormCityStatus",this.location)},del:function(){var t=this;this.$http({url:"WxHouse/deleteHouse",method:"post",data:{houseId:this.$route.query.houseId}}).then(function(e){1==e.data.statusCode&&t.$router.replace({path:"/myHouse"})})},areaCheck:function(t){return isNaN(1*t)?{valid:!1,msg:"请输入数字"}:{valid:!0}},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)},change:function(){},onConfirm:function(t){console.log("on-confirm arg",t)},onCancel:function(){},submit:function(){var t=this;if(this.is_finish){var e={cityId:this.city.cityId,cityName:this.city.cityName,communityId:this.community.communityId,communityName:this.community.communityname,districtId:this.community.districtId,districtName:this.community.districtName,provinceId:this.city.provinceId||"",provinceName:this.city.provinceName||"",address:this.community.detailaddress||"",buildingsquare:this.form.area,buyTime:this.form.date+"-01",buyPrice:this.form.buyPrice};"edit"==this.type&&(e.houseId=this.houseId),this.$http({url:"WxHouse/addHouse",method:"post",data:e}).then(function(e){1==e.data.statusCode&&t.$router.go(-1)})}},load:function(){var t=this;this.$http({method:"post",url:"/WxHouse/getHouseInfo",data:{houseId:this.houseId}}).then(function(e){console.log(e.data);var i=e.data.data;t.house=l.a.cloneDeep(i);var n={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName,communityId:i.communityId,communityname:i.communityName,detailaddress:i.address},o={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName};t.$store.commit("updateFormCommunityStatus",n),t.$store.commit("updateFormCityStatus",o),t.form={area:i.buildingsquare,date:i.buyTime.substr(0,i.buyTime.length-3),buyPrice:i.buyPrice}})}},beforeRouteLeave:function(t,e,i){console.log(t.path),"/city"!=t.path&&"/search"!=t.path&&this.clear(),i()},activated:function(){"edit"==this.$route.query.type&&(this.type="edit",this.houseId=this.$route.query.houseId,this.house||this.load())},mounted:function(){document.title="添加房产"}},f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add_house_page"},[i("group",{attrs:{gutter:0}},[i("cell",{attrs:{title:"选择城市",value:t.city.cityName||"请选择","is-link":"",link:{path:"/city",query:{type:2}}}}),t._v(" "),i("cell",{attrs:{title:"房产地址",value:"请选择","is-link":"",link:{path:"/search",query:{type:2}}}},[t.community?[i("div",[t._v(t._s(t.community.communityname))]),t._v(" "),t.community.detailaddress?i("div",{staticStyle:{"margin-top":"0.1rem"}},[t._v(t._s(t.community.detailaddress))]):t._e()]:t._e()],2),t._v(" "),i("x-input",{attrs:{title:"建筑面积","text-align":"right","is-type":t.areaCheck,"show-clear":!1},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("㎡")])]),t._v(" "),i("datetime",{attrs:{format:"YYYY-MM",title:"购入时间",placeholder:"选择日期"},on:{"on-change":t.change,"on-cancel":t.onCancel,"on-confirm":t.onConfirm,"on-hide":function(e){t.log("hide",e)}},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),i("x-input",{attrs:{title:"购入价格","text-align":"right","is-type":t.areaCheck,"show-clear":!1},model:{value:t.form.buyPrice,callback:function(e){t.$set(t.form,"buyPrice",e)},expression:"form.buyPrice"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("万")])])],1),t._v(" "),i("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!t.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:t.submit}},[t._v("立即评估")]),t._v(" "),"edit"==t.type?i("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:t.del}},[t._v("删除房产")]):t._e()],1)};f._withStripped=!0;var y=i(1),p=Object(y.a)(h,f,[],!1,null,null,null);p.options.__file="src/pages/index/home/views/add_house.vue";e.default=p.exports},5:function(t,e,i){"use strict";var n=i(19),o=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(n.a)(this.link,this.$router)}}}),a=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)};a._withStripped=!0;var s=i(1),r=!1;var c=function(t){r||i(218)},u=Object(s.a)(o,a,[],!1,c,null,null);u.options.__file="node_modules/vux/src/components/cell-box/index.vue";e.a=u.exports}}]);
//# sourceMappingURL=32.js.map