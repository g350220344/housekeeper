(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{212:function(t,e,i){},227:function(t,e,i){},410:function(t,e,i){"use strict";i.r(e);var o=i(3),s=i(4),a=i(5),n=i(7),r=i(14),l=i(20),c=i(17),d=i(0),h=i.n(d),m=(i(212),Object.assign,o.a,s.a,a.a,n.a,r.a,l.a,c.a,Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t}),u={name:"add-lease",components:{Group:o.a,Cell:s.a,CellBox:a.a,Datetime:n.a,XInput:r.a,PopupRadio:l.a,Toast:c.a},data:function(){return{today:"2018-09-01",is_toast:!1,toastTip:"",houseId:"",leaseTerms:[{id:1,name:"按月"},{id:2,name:"按季"},{id:3,name:"按年"}],is_edit:0,form:{money:"",leaseName:"",mobile:"",cycle:1,leaseTime:"",term:"",deposit:"",state:0}}},computed:{is_finish:function(){for(var t in this.form)if(""===this.form[t])return console.log("key: ",t),!1;return!0}},methods:{showToast:function(t){this.toastTip=t,this.is_toast=!0},del:function(){var t=this;this.showLoading(),this.$http({url:"WxRent/delectLease",method:"post",data:{id:this.$route.query.id}}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.go(-1))})},onTermChange:function(t,e){this.form.cycle=t.id},areaCheck:function(t){return isNaN(1*t)?{valid:!1,msg:"请输入数字"}:{valid:!0}},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)},change:function(){},onConfirm:function(t){console.log("on-confirm arg",t)},onCancel:function(){},showLoading:function(){this.$store.commit("updateLoadingStatus",{isLoading:!0})},hideLoading:function(t){this.$store.commit("updateLoadingStatus",{isLoading:!1}),2==t?this.$store.commit("updateWarnToastStatus"):this.$store.commit("updateToastStatus")},submit:function(){var t=this;if(this.is_finish){var e=/^[1-9]*[1-9][0-9]*$/,i=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,o=["",1,3,12][this.form.cycle];if(console.log(this.form.mobile),console.log("mob: ",i.test(this.form.mobile)),!i.test(this.form.mobile))return this.showToast("请输入正确的手机号"),!1;if(!e.test(this.form.money)||this.form.money>1e6)return this.showToast("请输入正确的租金(1~1000000)"),!1;if(!e.test(this.form.deposit)||this.form.deposit>1e6)return this.showToast("请输入正确的押金(1~1000000)"),!1;if(!e.test(this.form.term)||this.form.term>500||this.form.term<o||this.form.term%o!=0)return this.showToast("租期不能大于500个月收租周期为“按季”，请输入3的倍数收租周期为“按年”，请输入12的倍数"),!1;this.showLoading();var s="WxRent/addLease",a=h.a.cloneDeep(this.form);1==this.is_edit&&(s="WxRent/updateLease",a.id=this.$route.query.id),this.$http({url:s,method:"post",data:m({},a,{houseId:this.houseId})}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.go(-1))})}},load:function(){var t=this;this.$http({url:"WxRent/selectRentByRentId",method:"post",data:{id:this.$route.query.id}}).then(function(e){var i=e.data.data;if(1==e.data.statusCode){var o={};for(var s in t.form)t.form.hasOwnProperty(s)&&(o[s]=i[s]);o.cycle=parseInt(o.cycle),t.form=h.a.cloneDeep(o)}})}},created:function(){this.houseId=this.$route.query.houseId;this.$route.query;1==this.$route.query.is_edit&&(this.is_edit=1,this.load());var t=new Date;this.today=t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate),console.log("today: ",this.today),this.$set(this.form,"leaseTime",this.today)},mounted:function(){1==this.$route.query.is_edit?document.title="编辑租约":document.title="添加租约"}},f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("group",{staticClass:"i_cell",attrs:{gutter:0}},[i("x-input",{attrs:{title:"租客姓名",placeholder:"请输入姓名或称呼","text-align":"right","show-clear":!1},model:{value:t.form.leaseName,callback:function(e){t.$set(t.form,"leaseName",e)},expression:"form.leaseName"}}),t._v(" "),i("x-input",{attrs:{title:"租客电话",placeholder:"请输入联系电话","text-align":"right","show-clear":!1},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}}),t._v(" "),i("cell",{attrs:{title:"收租周期"}},[i("ul",{staticClass:"add_lease_checker"},t._l(t.leaseTerms,function(e,o){return i("li",{key:e.id,staticClass:"add_lease_checker_item",class:{add_lease_checker_item_active:t.form.cycle===e.id},on:{click:function(i){t.onTermChange(e,o)}}},[t._v(t._s(e.name))])}))]),t._v(" "),i("x-input",{staticStyle:{"line-height":"1rem"},attrs:{title:"每期租金",placeholder:"必填","text-align":"right","show-clear":!1},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("元")])]),t._v(" "),i("datetime",{attrs:{"min-year":2e3,"end-date":t.today,format:"YYYY-MM-DD",title:"租约开始日",placeholder:"选择日期"},on:{"on-change":t.change,"on-cancel":t.onCancel,"on-confirm":t.onConfirm,"on-hide":function(e){t.log("hide",e)}},model:{value:t.form.leaseTime,callback:function(e){t.$set(t.form,"leaseTime",e)},expression:"form.leaseTime"}}),t._v(" "),i("x-input",{attrs:{title:"租期",placeholder:"必填","text-align":"right","show-clear":!1},on:{"on-change":t.periodChange},model:{value:t.form.term,callback:function(e){t.$set(t.form,"term",e)},expression:"form.term"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("个月")])]),t._v(" "),i("x-input",{attrs:{title:"押金",placeholder:"必填","text-align":"right","show-clear":!1},model:{value:t.form.deposit,callback:function(e){t.$set(t.form,"deposit",e)},expression:"form.deposit"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("元")])])],1),t._v(" "),i("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!t.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:t.submit}},[t._v("立即评估")]),t._v(" "),t.is_edit?i("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:t.del}},[t._v("删除租约")]):t._e(),t._v(" "),i("toast",{attrs:{type:"text",time:800},model:{value:t.is_toast,callback:function(e){t.is_toast=e},expression:"is_toast"}},[t._v(t._s(t.toastTip))])],1)};f._withStripped=!0;var p=i(1),g=Object(p.a)(u,f,[],!1,null,null,null);g.options.__file="src/pages/index/home/views/add_lease.vue";e.default=g.exports},5:function(t,e,i){"use strict";var o=i(24),s=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(o.a)(this.link,this.$router)}}}),a=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)};a._withStripped=!0;var n=i(1),r=!1;var l=function(t){r||i(227)},c=Object(n.a)(s,a,[],!1,l,null,null);c.options.__file="node_modules/vux/src/components/cell-box/index.vue";e.a=c.exports}}]);
//# sourceMappingURL=30.bceef14.js.map