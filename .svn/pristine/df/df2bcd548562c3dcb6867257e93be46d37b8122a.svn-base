(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{204:function(t,e,i){},215:function(t,e,i){},402:function(t,e,i){"use strict";i.r(e);var a=i(2),n=i(3),o=i(4),s=i(5),r=i(14),c=i(13),u=i(0),l=i.n(u),d=(i(204),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}),m=(n.a,o.a,s.a,r.a,c.a,d({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(a.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}),h={name:"add-house",components:{Group:n.a,Cell:o.a,CellBox:s.a,Datetime:r.a,XInput:c.a},data:function(){return{maxYear:"",houseId:"",type:"",house:null,form:{area:"",date:"",buyPrice:""}}},computed:m({is_finish:function(){for(var t in this.form)if(!this.form[t])return!1;return!0}},Object(a.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),methods:{selCity:function(){"edit"!=this.$route.query.type&&this.$router.push({path:"/city",query:{type:2}})},selCommunity:function(){"edit"!=this.$route.query.type&&this.$router.push({path:"/search",query:{type:2}})},clear:function(){this.form={area:"",date:"",buyPrice:""},this.type="",this.house=null,this.$store.commit("updateFormCommunityStatus",null),this.$store.commit("updateFormCityStatus",this.location)},showLoading:function(){this.$store.commit("updateLoadingStatus",{isLoading:!0})},hideLoading:function(t){this.$store.commit("updateLoadingStatus",{isLoading:!1}),2==t?this.$store.commit("updateWarnToastStatus"):this.$store.commit("updateToastStatus")},del:function(){var t=this;this.showLoading(),this.$http({url:"WxHouse/deleteHouse",method:"post",data:{houseId:this.$route.query.houseId}}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.replace({path:"/myHouse"}))})},areaCheck:function(t){return isNaN(1*t)?{valid:!1,msg:"请输入数字"}:{valid:!0}},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)},change:function(){},onConfirm:function(t){console.log("on-confirm arg",t)},onCancel:function(){},submit:function(){var t=this;if(this.is_finish){this.showLoading();var e={cityId:this.city.cityId,cityName:this.city.cityName,communityId:this.community.communityId,communityName:this.community.communityname,districtId:this.community.districtId,districtName:this.community.districtName,provinceId:this.city.provinceId||"",provinceName:this.city.provinceName||"",address:this.community.detailaddress||"",buildingsquare:this.area,buyTime:this.date+"-01",buyPrice:this.buyPrice};"edit"==this.type&&(e.houseId=this.houseId),this.$http({url:"WxHouse/addHouse",method:"post",data:e}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.push({path:"/house",query:{houseId:e.data.data}}))})}},load:function(){var t=this;this.$http({method:"post",url:"/WxHouse/getHouseInfo",data:{houseId:this.houseId}}).then(function(e){console.log(e.data);var i=e.data.data;t.house=l.a.cloneDeep(i);var a={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName,communityId:i.communityId,communityname:i.communityName,detailaddress:i.address},n={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName};t.$store.commit("updateFormCommunityStatus",a),t.$store.commit("updateFormCityStatus",n),t.date=i.buyTime.substr(0,i.buyTime.length-3),t.buyPrice=i.buyPrice,t.area=i.buildingsquare})}},beforeRouteLeave:function(t,e,i){console.log(t.path),"/city"!=t.path&&"/search"!=t.path&&this.clear(),i()},watch:{area:function(t){(t=(t=(t=(t=(t=""+t).replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),this.area=t},buyPrice:function(t){(t=(t=(t=(t=(t=""+t).replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),this.area=t},date:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1;if(t){var n=t.split("-");(n[0]>i||n[0]==i&&n[1]>a)&&(this.date="")}}},activated:function(){"edit"==this.$route.query.type?(this.type="edit",this.houseId=this.$route.query.houseId,this.house||this.load()):void 0!==this.$route.query.buildingsquare&&(this.form={area:this.$route.query.buildingsquare,date:"",buyPrice:""})},created:function(){var t=new Date;this.maxYear=t.getFullYear()},mounted:function(){}},y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add_house_page"},[i("group",{attrs:{gutter:0}},[i("cell",{attrs:{title:"选择城市",value:t.city.cityName||"请选择","is-link":""},on:{click:t.selCity}}),t._v(" "),i("cell",{attrs:{title:"房产地址",value:"请选择","is-link":""},on:{click:t.selCommunity}},[t.community?[i("div",[t._v(t._s(t.community.communityname))]),t._v(" "),t.community.detailaddress?i("div",{staticStyle:{"margin-top":"0.1rem"}},[t._v(t._s(t.community.detailaddress))]):t._e()]:t._e()],2),t._v(" "),i("x-input",{attrs:{title:"建筑面积","text-align":"right","show-clear":!1},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("㎡")])]),t._v(" "),i("datetime",{attrs:{"max-year":t.maxYear,format:"YYYY-MM",title:"购入时间",placeholder:"选择日期"},on:{"on-change":t.change,"on-cancel":t.onCancel,"on-confirm":t.onConfirm,"on-hide":function(e){t.log("hide",e)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),i("x-input",{attrs:{title:"购入价格","text-align":"right","show-clear":!1},model:{value:t.buyPrice,callback:function(e){t.buyPrice=e},expression:"buyPrice"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("万")])])],1),t._v(" "),i("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!t.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:t.submit}},[t._v("立即评估")]),t._v(" "),"edit"==t.type?i("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:t.del}},[t._v("删除房产")]):t._e()],1)};y._withStripped=!0;var p=i(1),f=Object(p.a)(h,y,[],!1,null,null,null);f.options.__file="src/pages/index/home/views/add_house.vue";e.default=f.exports},5:function(t,e,i){"use strict";var a=i(22),n=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(a.a)(this.link,this.$router)}}}),o=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)};o._withStripped=!0;var s=i(1),r=!1;var c=function(t){r||i(215)},u=Object(s.a)(n,o,[],!1,c,null,null);u.options.__file="node_modules/vux/src/components/cell-box/index.vue";e.a=u.exports}}]);
//# sourceMappingURL=31.js.map