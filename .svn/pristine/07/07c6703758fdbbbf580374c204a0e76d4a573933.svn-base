(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{164:function(t,i){var s=!1;try{var e=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("test",null,e)}catch(t){}t.exports=s},228:function(t,i,s){},30:function(t,i,s){"use strict";i.a={hasClass:function(t,i){return new RegExp("(\\s|^)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&(t.classList?t.classList.add(i):this.hasClass(t,i)||(t.className+=""+i))},removeClass:function(t,i){t&&(t.classList?t.classList.remove(i):this.hasClass(t,i)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+i+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")))}}},39:function(t,i,s){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=s(164),a="object"===("undefined"==typeof window?"undefined":e(window));a&&(window.__$vuxPopups=window.__$vuxPopups||{});var n=function(t){var i=this;if(a){this.uuid=Math.random().toString(36).substring(3,8),this.params={},"[object Object]"===Object.prototype.toString.call(t)&&(this.params={hideOnBlur:t.hideOnBlur,onOpen:t.onOpen||function(){},onClose:t.onClose||function(){},showMask:t.showMask}),!!document.querySelectorAll(".vux-popup-mask").length<=0&&(this.divMask=document.createElement("a"),this.divMask.className="vux-popup-mask",this.divMask.dataset.uuid="",this.divMask.href="javascript:void(0)",document.body.appendChild(this.divMask));var s=void 0;(s=t.container?t.container:document.createElement("div")).className+=" vux-popup-dialog vux-popup-dialog-"+this.uuid,this.params.hideOnBlur||(s.className+=" vux-popup-mask-disabled"),this.div=s,t.container||document.body.appendChild(s),this.container=document.querySelector(".vux-popup-dialog-"+this.uuid),this.mask=document.querySelector(".vux-popup-mask"),this.mask.dataset.uuid+=","+this.uuid,this._bindEvents(),t=null,this.containerHandler=function(){i.mask&&!/show/.test(i.mask.className)&&setTimeout(function(){!/show/.test(i.mask.className)&&(i.mask.style.zIndex=-1)},200)},this.container&&this.container.addEventListener("webkitTransitionEnd",this.containerHandler),this.container&&this.container.addEventListener("transitionend",this.containerHandler)}};n.prototype.onClickMask=function(){this.params.hideOnBlur&&this.params.onClose()},n.prototype._bindEvents=function(){this.params.hideOnBlur&&(this.mask.addEventListener("click",this.onClickMask.bind(this),!1),this.mask.addEventListener("touchmove",function(t){return t.preventDefault()},!!o&&{passive:!1}))},n.prototype.show=function(){this.params.showMask&&(this.mask.classList.add("vux-popup-show"),this.mask.style.zIndex=500),this.container.classList.add("vux-popup-show"),this.params.onOpen&&this.params.onOpen(this),a&&(window.__$vuxPopups[this.uuid]=1)},n.prototype.hide=function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.container.classList.remove("vux-popup-show"),document.querySelector(".vux-popup-dialog.vux-popup-show")||(this.mask.classList.remove("vux-popup-show"),setTimeout(function(){t.mask&&!/show/.test(t.mask.className)&&(t.mask.style.zIndex=-1)},400)),!1===i&&this.params.onClose&&this.params.hideOnBlur&&this.params.onClose(this),this.isShow=!1,a&&delete window.__$vuxPopups[this.uuid]},n.prototype.destroy=function(){this.mask.dataset.uuid=this.mask.dataset.uuid.replace(new RegExp(","+this.uuid,"g"),""),this.mask.dataset.uuid?this.hide():(this.mask.removeEventListener("click",this.onClickMask.bind(this),!1),this.mask&&this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask)),this.container.removeEventListener("webkitTransitionEnd",this.containerHandler),this.container.removeEventListener("transitionend",this.containerHandler),a&&delete window.__$vuxPopups[this.uuid]};var c=n,r=s(30),l=(Boolean,String,String,Boolean,Boolean,Boolean,String,String,Object,Boolean,Boolean,Boolean,{name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0},shouldRerenderOnShow:{type:Boolean,default:!1},shouldScrollTopOnShow:{type:Boolean,default:!1}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var t=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var i=t;t.popup=new c({showMask:i.showMask,container:i.$el,hideOnBlur:i.hideOnBlur,onOpen:function(){i.fixSafariOverflowScrolling("auto"),i.show=!0},onClose:function(){i.show=!1,window.__$vuxPopups&&Object.keys(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){i.fixSafariOverflowScrolling("touch")},300)}}),t.value&&t.popup.show(),t.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(t){if(this.$overflowScrollingList.length)for(var i=0;i<this.$overflowScrollingList.length;i++)this.$overflowScrollingList[i].style.webkitOverflowScrolling=t},removeModalClassName:function(){"VIEW_BOX"===this.layout&&r.a.removeClass(document.body,"vux-modal-open")},doShow:function(){this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&r.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)},scrollTop:function(){var t=this;this.$nextTick(function(){t.$el.scrollTop=0;var i=t.$el.querySelectorAll(".vux-scrollable");if(i.length)for(var s=0;s<i.length;s++)i[s].scrollTop=0})}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,shouldRenderBody:!0,show:this.value}},computed:{styles:function(){var t={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?t.width=this.width:t.height=this.height,this.maxHeight&&(t["max-height"]=this.maxHeight),this.isTransparent&&(t.background="transparent"),this.popupStyle)for(var i in this.popupStyle)t[i]=this.popupStyle[i];return t}},watch:{value:function(t){this.show=t},show:function(t){var i=this;this.$emit("input",t),t?this.shouldRerenderOnShow?(this.shouldRenderBody=!1,this.$nextTick(function(){i.scrollTop(),i.shouldRenderBody=!0,i.doShow()})):(this.shouldScrollTopOnShow&&this.scrollTop(),this.doShow()):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||i.fixSafariOverflowScrolling("touch"),i.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}}),d=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("transition",{attrs:{name:"vux-popup-animate-"+t.position}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&!t.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+t.position,t.show?"vux-popup-show":""],style:t.styles},[t.shouldRenderBody?t._t("default"):t._e()],2)])};d._withStripped=!0;var u=s(1),m=!1;var _=function(t){m||s(228)},p=Object(u.a)(l,d,[],!1,_,null,null);p.options.__file="node_modules/vux/src/components/popup/index.vue";i.a=p.exports},40:function(t,i,s){"use strict";var e=s(66);function o(t){return void 0===t?document.body:"string"==typeof t&&0===t.indexOf("?")?document.body:("string"==typeof t&&t.indexOf("?")>0&&(t=t.split("?")[0]),"body"===t||!0===t?document.body:t instanceof window.Node?t:document.querySelector(t))}var a={inserted:function(t,i,s){var e=i.value;t.className=t.className?t.className+" v-transfer-dom":"v-transfer-dom";var a=t.parentNode,n=document.createComment(""),c=!1;!1!==e&&(a.replaceChild(n,t),o(e).appendChild(t),c=!0),t.__transferDomData||(t.__transferDomData={parentNode:a,home:n,target:o(e),hasMovedOut:c})},componentUpdated:function(t,i){var s=i.value;if(function(t){if(!t)return!1;if("string"==typeof t&&t.indexOf("?")>0)try{return JSON.parse(t.split("?")[1]).autoUpdate||!1}catch(t){return!1}return!1}(s)){var a=t.__transferDomData,n=a.parentNode,c=a.home,r=a.hasMovedOut;!r&&s?(n.replaceChild(c,t),o(s).appendChild(t),t.__transferDomData=e({},t.__transferDomData,{hasMovedOut:!0,target:o(s)})):r&&!1===s?(n.replaceChild(t,c),t.__transferDomData=e({},t.__transferDomData,{hasMovedOut:!1,target:o(s)})):s&&o(s).appendChild(t)}},unbind:function(t,i){t.className=t.className.replace("v-transfer-dom",""),t.__transferDomData&&!0===t.__transferDomData.hasMovedOut&&t.__transferDomData.parentNode&&t.__transferDomData.parentNode.appendChild(t),t.__transferDomData=null}};i.a=a},400:function(t,i,s){"use strict";s.r(i);var e=s(26),o=s(10),a=s(12),n=s.n(a),c=s(11),r=s.n(c),l=s(29),d=s.n(l),u=s(28),m=s.n(u),_=s(27),p=s.n(_),h=s(6),v=s.n(h),f=s(25),y=(s(19),s(15)),b=s(0),k=s.n(b),w=(s(59),e.a,f.a,o.a,{name:"community",components:{Swiper:e.a,BuyPop:f.a,Actionsheet:o.a},data:function(){return{iconAdd:v.a,iconRease:n.a,iconDecrease:r.a,iconHeart:d.a,iconHeartActive:m.a,iconSeeHouse:p.a,tools:y.a,communityId:"",picIndex:0,showBuyPop:!1,pics:[],res:{},info:{},isAtt:0,isHouse:0,isRepor:0,reportList:[],showMenu:!1}},created:function(){this.communityId=this.$route.query.communityId,this.load(),this.loadStatus(),this.getReportList()},methods:{mark:function(){var t=this;this.markLock=!0,this.$store.commit("updateLoadingStatus",{isLoading:!0});var i="WxAttention/addAttention",s={dataId:this.communityId};1==this.isAtt?i="WxAttention/canelAttention":s.type=1,this.$http({url:i,method:"post",data:s}).then(function(i){1==i.data.statusCode&&(t.isAtt=1==t.isAtt?0:1,t.markLock=!1,t.$store.commit("updateLoadingStatus",{isLoading:!1}))})},selReport:function(t,i){var s=this;if("cancel"!=t){var e=["","","/reportBrief","/reportSell","",""];0==i.isRead?this.setRead(i.value).then(function(){s.checkReport(e[i.r_type])}).catch(function(t){}):this.checkReport(e[i.r_type])}},setRead:function(t){var i=this;return this.$store.commit("updateLoadingStatus",{isLoading:!0}),new Promise(function(s,e){i.$http({url:"WxReport/updateReportRead",method:"post",data:{communityId:t}}).then(function(t){1==t.data.statusCode?s():e(),i.$store.commit("updateLoadingStatus",{isLoading:!1})})})},getReportList:function(){var t=this;this.$http({url:"WxUser/selectReportByUserIdAndCommunityId",method:"post",data:{communityId:this.communityId}}).then(function(i){var s=i.data.data,e=["","完整报告","简要报告","出售报告","出租报告","持产报告"];1==i.data.statusCode&&(t.reportList=s.map(function(t){return{label:1==t.isExpired?e[t.type]+"(已过期)":e[t.type],value:t.communityId,r_type:t.type,isExpired:t.isExpired,isRead:t.isRead,type:1==t.isExpired?"disabled":"default"}}))})},initMap:function(){if(this.info.latitude&&this.info.longitude){var t=new BMap.Map("cmt_block_3_ctn_map"),i=new BMap.Point(this.info.longitude,this.info.latitude);t.centerAndZoom(i,15)}},load:function(){var t=this;this.$http({url:"community/getCommunityMarket",method:"post",data:{communityId:this.$route.query.communityId}}).then(function(i){var s=i.data.data;if(1==i.data.statusCode){t.res=k.a.cloneDeep(s);var e=k.a.cloneDeep(s.communityInfo)||{};e.developername&&(e.developername=y.a.getLength(e.developername)>36?e.developername.substr(0,16)+"...":e.developername),e.companyname&&(e.companyname=y.a.getLength(e.companyname)>36?e.companyname.substr(0,16)+"...":e.companyname),t.info=e,t.pics=t.info.pictureUrlList?t.info.pictureUrlList.split(",").map(function(t){return{url:"javascript:",img:t}}):[],t.initMap(),t.$store.commit("updateLoadingStatus",{isLoading:!1})}})},checkReport:function(t){console.log("path:  ",t),""===t||this.$router.push({path:t,query:{communityId:this.communityId}})},onPopHide:function(){this.showBuyPop=!1},loadStatus:function(){var t=this;this.$http({url:"WxAttention/getUserCommunityInfo",method:"post",data:{communityId:this.communityId}}).then(function(i){var s=i.data.data;1==i.data.statusCode&&(t.isAtt=s.isAtt,t.isHouse=s.isHouse,t.isRepor=s.isRepor)})},clickHouse:function(){if(this.isHouse)this.$router.push({path:"/myHouse"});else{var t={cityId:this.res.cityId,cityName:this.res.cityName,districtId:this.res.districtId,districtName:this.res.districtName||"",communityId:this.res.communityId,communityname:this.res.communityName,detailaddress:this.info.detailaddress},i={cityId:this.res.cityId,cityName:this.res.cityName,districtId:this.res.districtId,districtName:this.res.districtName||""};this.$store.commit("updateFormCommunityStatus",t),this.$store.commit("updateFormCityStatus",i),this.$router.push({path:"/addHouse"})}}},mounted:function(){document.title="小区基本信息"}}),g=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{directives:[{name:"show",rawName:"v-show",value:!!t.info.communityname,expression:"!!info.communityname"}],staticClass:"cmt_page"},[s("div",{staticClass:"cmt_pic_wrapper"},[s("swiper",{attrs:{list:t.pics,"show-dots":!1,auto:"",height:"4.82rem"},model:{value:t.picIndex,callback:function(i){t.picIndex=i},expression:"picIndex"}}),t._v(" "),s("div",{staticClass:"cmt_pic_tips"},[t._v(t._s(t.picIndex+1)+"/"+t._s(t.pics.length))])],1),t._v(" "),s("div",{staticClass:"cmt_block_1"},[s("div",{staticClass:"cmt_block_1_top vux-1px-b"},[s("div",{staticClass:"cmt_block_1_top_name"},[t._v(t._s(t.res.communityName||""))]),t._v(" "),s("div",{staticClass:"cmt_block_1_top_address"},[t._v(t._s(t.info.detailaddress||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom"},[s("div",{staticClass:"cmt_block_1_bottom_item"},[s("div",{staticClass:"cmt_block_1_bottom_item_label"},[t._v("本月均价")]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom_item_val"},[t._v(t._s(t.res.similarHousesSalesqmprice||"")+"元/㎡")])]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom_item"},[s("div",{staticClass:"cmt_block_1_bottom_item_label"},[t._v("环比上月")]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom_item_val"},[t.res.saleSqmPriceLinkRelativeRatio>0?s("img",{attrs:{src:t.iconRease,alt:""}}):s("img",{attrs:{src:t.iconDecrease,alt:""}}),t._v(" "),s("span",{class:{cmt_rate_up:t.res.saleSqmPriceLinkRelativeRatio>=0,cmt_rate_down:t.res.saleSqmPriceLinkRelativeRatio<0}},[t._v("\n                        "+t._s((t.res.saleSqmPriceLinkRelativeRatio+"").replace("-",""))+"%\n                    ")])])]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom_item"},[s("div",{staticClass:"cmt_block_1_bottom_item_label"},[t._v("同比去年")]),t._v(" "),s("div",{staticClass:"cmt_block_1_bottom_item_val"},[t.res.saleSqmPriceOnYear_on_YearBasis>0?s("img",{attrs:{src:t.iconRease,alt:""}}):s("img",{attrs:{src:t.iconDecrease,alt:""}}),t._v(" "),s("span",{class:{cmt_rate_up:t.res.saleSqmPriceOnYear_on_YearBasis>=0,cmt_rate_down:t.res.saleSqmPriceOnYear_on_YearBasis<0}},[t._v("\n                        "+t._s((t.res.saleSqmPriceOnYear_on_YearBasis+"").replace("-",""))+"%\n                    ")])])])])]),t._v(" "),t.info?s("div",{staticClass:"cmt_block_2"},[s("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("基本信息")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn"},[s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("建筑年代")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.buildyear||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("总户数")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.totalhouseholdcount||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("容积率")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.plotratio||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("停车位")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.parkingNum||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("绿化率")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.greeningrate?t.info.greeningrate+"%":""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item"},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("物业费")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.pmfee?t.info.pmfee+"元平米/月":""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item",staticStyle:{width:"100%"}},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("开发商")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.developername||""))])]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item",staticStyle:{width:"100%"}},[s("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("物业公司")]),t._v(" "),s("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.companyname||""))])])])]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.info&&t.info.latitude&&t.info.latitude,expression:"info && info.latitude && info.latitude"}],staticClass:"cmt_block_3"},[s("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("位置地图")]),t._v(" "),s("div",{staticClass:"cmt_block_3_ctn"},[s("div",{staticClass:"cmt_block_3_ctn_map_mask"}),t._v(" "),s("div",{staticClass:"cmt_block_3_ctn_maker"},[s("div",{staticClass:"cmt_block_3_ctn_maker_inner"},[s("div",{staticClass:"cmt_block_3_ctn_maker_inner_tit"},[t._v(t._s(t.res.communityName))]),t._v(" "),s("div",{staticClass:"cmt_block_3_ctn_maker_inner_address"},[t._v(t._s(t.info.detailaddress||""))])])]),t._v(" "),s("div",{staticClass:"cmt_block_3_ctn_map",attrs:{id:"cmt_block_3_ctn_map"}})])]),t._v(" "),s("div",{staticClass:"cmt_tool_bar vux-1px-t"},[s("div",{staticClass:"cmt_tool_bar_little_item vux-1px-r",on:{click:t.mark}},[1==t.isAtt?s("img",{attrs:{src:t.iconHeartActive,alt:""}}):s("img",{attrs:{src:t.iconHeart,alt:""}}),t._v(" "),s("span",[t._v(t._s(1==t.isAtt?"已关注":"关注"))])]),t._v(" "),s("div",{staticClass:"cmt_tool_bar_little_item",staticStyle:{width:"1.46rem"},on:{click:t.clickHouse}},[s("img",{attrs:{src:1==t.isHouse?t.iconSeeHouse:t.iconAdd,alt:""}}),t._v(" "),s("span",[t._v(t._s(1==t.isHouse?"查看房产":"添加房产"))])]),t._v(" "),1==t.isRepor?[s("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#ffbb38"},on:{click:function(i){t.showMenu=!0}}},[t._v("查看报告")]),t._v(" "),s("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#388cff"},on:{click:function(i){t.showBuyPop=!0}}},[t._v("订阅小区报告")])]:[s("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#388cff",width:"4.6rem"},on:{click:function(i){t.showBuyPop=!0}}},[t._v("订阅小区报告")])]],2),t._v(" "),t.res.communityName?s("buy-pop",{attrs:{cid:t.communityId,tit:t.res.communityName,"pop-show":t.showBuyPop},on:{"on-hide":t.onPopHide}}):t._e(),t._v(" "),s("actionsheet",{attrs:{"show-cancel":"",menus:t.reportList},on:{"on-click-menu":t.selReport},model:{value:t.showMenu,callback:function(i){t.showMenu=i},expression:"showMenu"}})],1)};g._withStripped=!0;var C=s(1),x=Object(C.a)(w,g,[],!1,null,null,null);x.options.__file="src/pages/index/home/views/community.vue";i.default=x.exports}}]);
//# sourceMappingURL=15.471b7fd.js.map