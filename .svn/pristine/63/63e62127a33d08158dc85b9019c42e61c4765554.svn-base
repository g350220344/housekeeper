(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{214:function(t,e,i){},227:function(t,e,i){},422:function(t,e,i){"use strict";i.r(e);var a=i(2),s=i(33),n=i.n(s),o=i(3),r=i(4),u=i(5),c=i(7),d=i(14),l=i(64),h=i(56),m=i.n(h),y={show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=m()({destroyOnHide:!0,isOneInstance:!0},t),(y.datetime=new l.a(t)).show()},hide:function(){y.datetime&&y.datetime.hide()}},p={install:function(t){var e=t.extend(c.a),i=document.createElement("div");if("undefined"!=typeof document){var a=new e({el:i});a.$el.style.display="none",a.$el.className+=" vux-datetime-style-inject",document.body.appendChild(a.$el)}t.$vux?t.$vux.datetime=y:t.$vux={datetime:y},t.mixin({created:function(){this.$vux=t.$vux}})}},f=i(17),v=i(0),g=i.n(v),b=(i(214),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t});n.a.use(p);o.a,r.a,u.a,c.a,d.a,f.a,b({is_finish:function(){return!!this.area&&(!!this.date&&!!this.buyPrice)}},Object(a.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}}));var _=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};n.a.use(p);var x={name:"add-house",components:{Group:o.a,Cell:r.a,CellBox:u.a,Datetime:c.a,XInput:d.a,Toast:f.a},data:function(){return{is_toast:!1,toastTip:"",maxYear:"",houseId:"",type:"",house:null,area:"",date:"",buyPrice:"",areaCheck:function(t){return{valid:/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t>=10&&t<=1e4,msg:"请输入正确的面积(10~10000㎡)"}},priceCheck:function(t){return{valid:/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(t)&&t>=1||t<=1e6,msg:"请输入正确的购入价格(1~1000000万)"}}}},computed:_({is_finish:function(){return!!this.area&&(!!this.date&&!!this.buyPrice)}},Object(a.mapState)({location:function(t){return t.glb.city},city:function(t){return t.glb.formCity},community:function(t){return t.glb.formCommunity}})),methods:{showToast:function(t){this.toastTip=t,this.is_toast=!0},selDate:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,a=this;this.$vux.datetime.show({format:"YYYY-MM",minYear:1980,maxYear:this.maxYear,confirmText:"确定",cancelText:"取消",value:"",onHide:function(){},onShow:function(){},onConfirm:function(t){var s=t.split("-");console.log(s[1].replace(/^0/g,"")),s[0]==e&&s[1].replace(/^0/g,"")>i?a.date=e+"-"+(i>=10?i:"0"+i):a.date=t}})},selCity:function(){"edit"!=this.type&&this.$router.push({path:"/city",query:{type:2}})},selCommunity:function(){"edit"!=this.type&&this.$router.push({path:"/search",query:{type:2}})},clear:function(){this.area="",this.date="",this.buyPrice="",this.type="",this.house=null,this.$store.commit("updateFormCommunityStatus",null),this.$store.commit("updateFormCityStatus",this.location)},showLoading:function(){this.$store.commit("updateLoadingStatus",{isLoading:!0})},hideLoading:function(t){this.$store.commit("updateLoadingStatus",{isLoading:!1}),2==t?this.$store.commit("updateWarnToastStatus"):this.$store.commit("updateToastStatus")},del:function(){var t=this;this.showLoading(),this.$http({url:"WxHouse/deleteHouse",method:"post",data:{houseId:this.$route.query.houseId}}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.replace({path:"/myHouse"}))})},submit:function(){var t=this;if(this.is_finish){var e=/^[0-9]+([.]{1}[0-9]{1,2})?$/;if(!e.test(this.area)||this.area<10||this.area>1e4)return this.showToast("请输入正确的面积(10~10000㎡)"),!1;if(!e.test(this.buyPrice)||this.buyPrice<1||this.buyPrice>1e6)return this.showToast("请输入正确的购入价格(1~1000000万)"),!1;this.showLoading();var i={cityId:this.city.cityId,cityName:this.city.cityName,communityId:this.community.communityId,communityName:this.community.communityname,districtId:this.community.districtId,districtName:this.community.districtName,provinceId:this.city.provinceId||"",provinceName:this.city.provinceName||"",address:this.community.detailaddress||"",buildingsquare:this.area,buyTime:this.date+"-01",buyPrice:this.buyPrice};"edit"==this.type&&(i.houseId=this.houseId),this.$http({url:"WxHouse/addHouse",method:"post",data:i}).then(function(e){1==e.data.statusCode&&(t.hideLoading(),t.$router.replace({path:"/house",query:{houseId:e.data.data}}))})}},load:function(){var t=this;this.$http({method:"post",url:"/WxHouse/getHouseInfoById",data:{houseId:this.houseId}}).then(function(e){console.log(e.data);var i=e.data.data;if(1==e.data.statusCode){t.house=g.a.cloneDeep(i);var a={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName,communityId:i.communityId,communityname:i.communityName,detailaddress:i.address},s={cityId:i.cityId,cityName:i.cityName,districtId:i.districtId,districtName:i.districtName};t.$store.commit("updateFormCommunityStatus",a),t.$store.commit("updateFormCityStatus",s),t.date=i.buyTime.substr(0,i.buyTime.length-3),t.buyPrice=i.buyPrice,t.area=i.buildingsquare,t.$store.commit("updateLoadingStatus",{isLoading:!1})}})}},beforeRouteLeave:function(t,e,i){console.log(t.path),"/city"!=t.path&&"/search"!=t.path&&this.clear(),i()},activated:function(){console.log("add_house query:  ",this.$route.query),document.title="添加房产","edit"==this.$route.query.type?(document.title="编辑房产",this.type="edit",this.houseId=this.$route.query.houseId,this.house?this.$store.commit("updateLoadingStatus",{isLoading:!1}):this.load()):void 0!==this.$route.query.buildingsquare?(this.area=this.$route.query.buildingsquare,this.date="",this.buyPrice="",this.$store.commit("updateLoadingStatus",{isLoading:!1})):this.$store.commit("updateLoadingStatus",{isLoading:!1})},created:function(){var t=new Date;this.maxYear=t.getFullYear()},mounted:function(){document.title="添加房产"}},$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add_house_page"},[i("group",{attrs:{gutter:0}},[i("cell",{attrs:{title:"选择城市",value:t.city.cityName||"请选择","is-link":""},nativeOn:{click:function(e){return t.selCity(e)}}}),t._v(" "),i("cell",{attrs:{title:"房产地址",value:"请选择","is-link":""},nativeOn:{click:function(e){return t.selCommunity(e)}}},[t.community?[i("div",[t._v(t._s(t.community.communityname))]),t._v(" "),t.community.detailaddress?i("div",{staticStyle:{"margin-top":"0.1rem"}},[t._v(t._s(t.community.detailaddress))]):t._e()]:t._e()],2),t._v(" "),i("x-input",{attrs:{title:"建筑面积","text-align":"right","show-clear":!1},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("㎡")])]),t._v(" "),i("cell",{attrs:{title:"购入时间",value:t.date||"选择日期","is-link":""},nativeOn:{click:function(e){return t.selDate(e)}}}),t._v(" "),i("x-input",{attrs:{title:"购入价格","text-align":"right","show-clear":!1},model:{value:t.buyPrice,callback:function(e){t.buyPrice=e},expression:"buyPrice"}},[i("span",{staticStyle:{"padding-left":"0.1rem"},attrs:{slot:"right"},slot:"right"},[t._v("万")])])],1),t._v(" "),i("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!t.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:t.submit}},[t._v("立即评估")]),t._v(" "),"edit"==t.type?i("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:t.del}},[t._v("删除房产")]):t._e(),t._v(" "),i("toast",{attrs:{type:"text",time:800},model:{value:t.is_toast,callback:function(e){t.is_toast=e},expression:"is_toast"}},[t._v(t._s(t.toastTip))])],1)};$._withStripped=!0;var I=i(1),w=Object(I.a)(x,$,[],!1,null,null,null);w.options.__file="src/pages/index/home/views/add_house.vue";e.default=w.exports},5:function(t,e,i){"use strict";var a=i(24),s=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(a.a)(this.link,this.$router)}}}),n=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-cell-box weui-cell",class:this.className,style:this.style,on:{click:this.onClick}},[this._t("default")],2)};n._withStripped=!0;var o=i(1),r=!1;var u=function(t){r||i(227)},c=Object(o.a)(s,n,[],!1,u,null,null);c.options.__file="node_modules/vux/src/components/cell-box/index.vue";e.a=c.exports}}]);
//# sourceMappingURL=32.ac3c077.js.map