(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{210:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);a(210);var o=a(3),n=a(4),i=a(7),l=a(18),s=(o.a,n.a,i.a,l.a,{name:"add-loan",components:{Group:o.a,Cell:n.a,Datetime:i.a,PopupRadio:l.a},data:function(){return{houseId:"",is_edit:0,termOptions:[],loanTypes:[{key:1,value:"商业按揭贷款"},{key:2,value:"公积金贷款"},{key:3,value:"信用贷"},{key:4,value:"房抵贷"}],loanMethods:[{key:1,value:"公积金"},{key:2,value:"建设银行"},{key:3,value:"工商银行"},{key:4,value:"中国银行"},{key:5,value:"农业银行"},{key:6,value:"交通银行"},{key:7,value:"邮储银行"},{key:8,value:"其他"}],payTypes:["等额本息","等额本金"],interest:"",loanType:"",loanMethod:"",form:{loan:"",loanPeriod:20,payType:"等额本息",date:""}}},computed:{is_finish:function(){for(var e in this.form)if(!this.form[e])return!1;return!0}},watch:{interest:function(e){(e=(e=(e=(e=(e=""+e).replace(/[^\d.]/g,"")).replace(/\.{3,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e>36&&(e=""),e<1&&(e=""),this.interest=e},loanType:function(e){this.loanMethods=2==e?[{key:1,value:"公积金"},{key:2,value:"建设银行"},{key:3,value:"工商银行"},{key:4,value:"中国银行"},{key:5,value:"农业银行"},{key:6,value:"交通银行"},{key:7,value:"邮储银行"},{key:8,value:"其他"}]:[{key:2,value:"建设银行"},{key:3,value:"工商银行"},{key:4,value:"中国银行"},{key:5,value:"农业银行"},{key:6,value:"交通银行"},{key:7,value:"邮储银行"},{key:8,value:"其他"}]}},methods:{del:function(){var e=this;this.showLoading(),this.$http({url:"WxLoan/deleteLoan",method:"post",data:{id:this.$route.query.id}}).then(function(t){1==t.data.statusCode&&(e.hideLoading(),e.$router.go(-1))})},interestCheck:function(e){e.value=e.value.replace(/[^\d.]/g,""),e.value=e.value.replace(/\.{2,}/g,"."),e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.value.indexOf(".")<0&&""!=e.value&&(e.value=parseFloat(e.value))},areaCheck:function(e){return isNaN(1*e)?{valid:!1,msg:"请输入数字"}:{valid:!0}},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(e,t)},change:function(){},onConfirm:function(e){console.log("on-confirm arg",e)},onCancel:function(){},submit:function(){var e=this;if(this.is_finish){this.showLoading();var t=this.loanMethods.filter(function(t){return t.key==e.loanMethod})[0].value,a=this.loanTypes.filter(function(t){return t.key==e.loanType})[0].value,o={houseId:this.houseId,loanTime:this.form.date,term:12*this.form.loanPeriod,type:this.loanType,typeName:a,channel:this.loanMethod,channelName:t,money:this.form.loan,rate:this.interest,repayment:this.form.payType},n="WxLoan/addLoan";1==this.$route.query.is_edit&&(o.id=this.$route.query.id,n="WxLoan/updateLoanByLoanId"),this.$http({url:n,method:"post",data:o}).then(function(t){1==t.data.statusCode&&(e.hideLoading(),e.$router.go(-1))})}},showLoading:function(){this.$store.commit("updateLoadingStatus",{isLoading:!0})},hideLoading:function(e){this.$store.commit("updateLoadingStatus",{isLoading:!1}),2==e?this.$store.commit("updateWarnToastStatus"):this.$store.commit("updateToastStatus")},load:function(){var e=this;this.$http({url:"WxLoan/selectLoanById",method:"post",data:{id:this.$route.query.id}}).then(function(t){var a=t.data.data;1==t.data.statusCode&&(e.form={loan:a.money,loanPeriod:a.term/12,payType:a.repayment,date:a.loanTime},e.loanMethod=parseInt(a.channel),e.loanType=parseInt(a.type),e.interest=a.rate)})}},created:function(){var e=this.$route.query;this.houseId=this.$route.query.houseId;for(var t=1;t<=30;t++)this.termOptions.push({key:t,value:t+"年（"+12*t+"期)"});1==e.is_edit&&(this.is_edit=e.is_edit,this.load())},activated:function(){1==this.$route.query.is_edit?document.title="编辑贷款":document.title="添加贷款"},mounted:function(){document.title="添加贷款"}}),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("group",{staticClass:"i_cell",attrs:{gutter:0}},[a("datetime",{attrs:{format:"YYYY-MM-DD",title:"贷款起始日",placeholder:"选择日期"},on:{"on-change":e.change,"on-cancel":e.onCancel,"on-confirm":e.onConfirm,"on-hide":function(t){e.log("hide",t)}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),e._v(" "),a("popup-radio",{attrs:{title:"贷款期限",options:e.termOptions},model:{value:e.form.loanPeriod,callback:function(t){e.$set(e.form,"loanPeriod",t)},expression:"form.loanPeriod"}}),e._v(" "),a("popup-radio",{attrs:{placeholder:"请选择",title:"贷款类型",options:e.loanTypes},model:{value:e.loanType,callback:function(t){e.loanType=t},expression:"loanType"}}),e._v(" "),a("popup-radio",{attrs:{placeholder:"请选择",title:"贷款渠道",options:e.loanMethods},model:{value:e.loanMethod,callback:function(t){e.loanMethod=t},expression:"loanMethod"}}),e._v(" "),a("cell",{attrs:{title:"贷款金额"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.loan,expression:"form.loan"}],staticClass:"add_loan_inline_input",attrs:{type:"text",placeholder:"必填"},domProps:{value:e.form.loan},on:{input:function(t){t.target.composing||e.$set(e.form,"loan",t.target.value)}}}),e._v(" 万 | 年利率 "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.interest,expression:"interest"}],staticClass:"add_loan_inline_input",attrs:{type:"text",placeholder:"必填"},domProps:{value:e.interest},on:{input:function(t){t.target.composing||(e.interest=t.target.value)}}}),e._v(" %\n        ")]),e._v(" "),a("popup-radio",{attrs:{title:"还款方式",options:e.payTypes},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}})],1),e._v(" "),a("div",{staticClass:"sub_btn",class:{sub_btn_disabled:!e.is_finish},staticStyle:{"margin-top":"0.85rem"},on:{click:e.submit}},[e._v("立即评估")]),e._v(" "),e.is_edit?a("div",{staticStyle:{"margin-top":"0.55rem",color:"#f9354d","text-align":"center","font-size":"0.28rem","text-decoration-line":"underline"},on:{click:e.del}},[e._v("删除贷款")]):e._e()],1)};r._withStripped=!0;var u=a(1),d=Object(u.a)(s,r,[],!1,null,null,null);d.options.__file="src/pages/index/home/views/add_loan.vue";t.default=d.exports}}]);
//# sourceMappingURL=30.9937e76.js.map