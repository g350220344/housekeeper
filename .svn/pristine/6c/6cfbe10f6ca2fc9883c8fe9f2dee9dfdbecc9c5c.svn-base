(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{167:function(t,i,e){},231:function(t,i,e){},406:function(t,i,e){"use strict";e.r(i);var s=e(27),a=e(11),c=e(28),o=e.n(c),n=e(13),_=e.n(n),l=e(12),r=e.n(l),m=e(30),d=e.n(m),u=e(29),v=e.n(u),h=e(6),p=e.n(h),b=e(47),f=e.n(b),y=e(26),k=e(45),C=e(44),g=e(0),x=e.n(g),w=e(15),I=(e(62),s.a,k.a,C.a,y.a,a.a,{name:"report-brief",components:{Swiper:s.a,IProgressM:k.a,MChart:C.a,BuyPop:y.a,Actionsheet:a.a},data:function(){return{iconSeeHouse:o.a,iconRease:_.a,iconDecrease:r.a,iconHeart:d.a,iconHeartActive:v.a,cmtDefaultPic:f.a,iconAdd:p.a,showBuyPop:!1,picIndex:0,communityId:"",isMark:0,pics:[],leaseRatioArray:[],community:{},info:{},date:[],series:[],tabIndex:0,renderQueue:[],leaseTendSeries:[],leaseTendDate:[],isAtt:0,isHouse:0,isRepor:0,reportList:[],showMenu:!1}},created:function(){this.communityId=this.$route.query.communityId,this.load(),this.loadStatus(),this.loadRentTend(),this.getReportList()},methods:{mark:function(){var t=this;this.markLock=!0,this.$store.commit("updateLoadingStatus",{isLoading:!0});var i="WxAttention/addAttention",e={dataId:this.communityId};1==this.isAtt?i="WxAttention/canelAttention":e.type=1,this.$http({url:i,method:"post",data:e}).then(function(i){1==i.data.statusCode&&(t.isAtt=1==t.isAtt?0:1,t.markLock=!1,t.$store.commit("updateLoadingStatus",{isLoading:!1}))})},checkReport:function(t){console.log("path:  ",t),""===t||this.$router.push({path:t,query:{communityId:this.communityId}})},selReport:function(t,i){var e=this;if("cancel"!=t){var s=["","","/reportBrief","/reportSell","",""];0==i.isRead?this.setRead(i.value).then(function(){e.checkReport(s[i.r_type])}).catch(function(t){}):this.checkReport(s[i.r_type])}},setRead:function(t){var i=this;return this.$store.commit("updateLoadingStatus",{isLoading:!0}),new Promise(function(e,s){i.$http({url:"WxReport/updateReportRead",method:"post",data:{communityId:t}}).then(function(t){1==t.data.statusCode?e():s(),i.$store.commit("updateLoadingStatus",{isLoading:!1})})})},getReportList:function(){var t=this;this.$http({url:"WxUser/selectReportByUserIdAndCommunityId",method:"post",data:{communityId:this.communityId}}).then(function(i){var e=i.data.data,s=["","完整报告","简要报告","出售报告","出租报告","持产报告"];1==i.data.statusCode&&(t.reportList=e.map(function(t){return{label:1==t.isExpired?s[t.type]+"(已过期)":s[t.type],value:t.communityId,r_type:t.type,isExpired:t.isExpired,isRead:t.isRead,type:1==t.isExpired?"disabled":"default"}}))})},onPopHide:function(){this.showBuyPop=!1},addHouse:function(){var t={cityId:this.community.cityId,cityName:this.community.cityName,districtId:this.community.districtId,districtName:this.community.districtName,communityId:this.community.communityId,communityname:this.info.communityname,detailaddress:this.info.detailaddress},i={cityId:this.community.cityId,cityName:this.community.cityName,districtId:this.community.districtId,districtName:this.community.districtName};this.$store.commit("updateFormCommunityStatus",t),this.$store.commit("updateFormCityStatus",i),this.$router.push({path:"/addHouse"})},clickHouse:function(){1==this.isHouse?this.$router.push({path:"/myHouse"}):this.addHouse()},load:function(){var t=this;this.$http({url:"community/getCommunityMarket",method:"post",data:{communityId:this.$route.query.communityId}}).then(function(i){var e=i.data.data;if(1==i.data.statusCode){t.community=x.a.cloneDeep(e),t.getRentalPriceRatio(),t.loadPriceTend();var s=x.a.cloneDeep(e.communityInfo)||{};s.developername&&(s.developername=w.a.getLength(s.developername)>36?s.developername.substr(0,16)+"...":s.developername),s.companyname&&(s.companyname=w.a.getLength(s.companyname)>36?s.companyname.substr(0,16)+"...":s.companyname),t.info=s,t.pics=t.info.pictureUrlList?t.info.pictureUrlList.split(",").map(function(i){return{url:"javascript:",img:i,fallbackImg:t.cmtDefaultPic}}):[t.cmtDefaultPic],t.$nextTick(function(){t.initMap()}),t.$store.commit("updateLoadingStatus",{isLoading:!1})}})},loadStatus:function(){var t=this;this.$http({url:"WxAttention/getUserCommunityInfo",method:"post",data:{communityId:this.communityId}}).then(function(i){var e=i.data.data;1==i.data.statusCode&&(t.isAtt=e.isAtt,t.isHouse=e.isHouse,t.isRepor=e.isRepor)})},loadPriceTend:function(){var t=this;this.$http({url:"WxCommon/getMarketYear",method:"post",data:{cityId:this.community.cityId,districtId:this.community.districtId,communityId:this.community.communityId}}).then(function(i){var e=i.data.data;if(1==i.data.statusCode){var s=[];e.communityMarketList&&e.communityMarketList.length>0&&s.push({label:e.communityName,data:e.communityMarketList[1]}),e.districtMarketList&&e.districtMarketList.length>0&&s.push({label:e.districtName,data:e.districtMarketList[1]}),e.cityMarketList&&e.cityMarketList.length>0&&s.push({label:e.cityName,data:e.cityMarketList[1]}),t.date=x.a.cloneDeep(e.cityMarketList[0]),t.series=x.a.cloneDeep(s)}})},loadRentTend:function(){var t=this;this.$http({url:"WxCommon/getCommunityRent",method:"post",data:{communityId:this.$route.query.communityId}}).then(function(i){var e=i.data.data;if(1==i.data.statusCode){var s=["一居","二居","三居"],a=["oneRoom","twoRoom","threeRoom"].map(function(t,i){return{label:s[i],data:x.a.cloneDeep(e[t][1])}});a.length>0&&(t.leaseTendDate=e.oneRoom[0],t.leaseTendSeries=x.a.cloneDeep(a),t.$nextTick(function(){t.renderChart()}))}})},getRentalPriceRatio:function(){var t=this;this.$http({url:"WxCommon/getRentalPriceRatio",method:"post",data:{cityId:this.community.cityId,districtId:this.community.districtId,communityId:this.communityId}}).then(function(i){var e=i.data.data;1==i.data.statusCode&&(t.leaseRatioArray=[{name:e.cityName,val:e.cityRatio},{name:e.districtName,val:e.districtRatio},{name:e.communityName,val:e.communityRatio}])})},initMap:function(){if(this.info.latitude&&this.info.longitude){var t=new BMap.Map("rb_block_3_ctn_map"),i=new BMap.Point(this.info.longitude,this.info.latitude);t.centerAndZoom(i,15)}},renderChart:function(){var t=this,i=this.leaseTendSeries[this.tabIndex],e=this.tabIndex;if(!(this.renderQueue.indexOf(e)>=0)){var s=this.$refs.leaseChart[e],a=echarts.init(s),c={grid:{top:40,bottom:30,right:12,left:50},animationThreshold:!1,tooltip:{show:!0},xAxis:{type:"category",data:this.leaseTendDate,offset:-13,axisLabel:{interval:0,show:!0,color:"#bbb"},splitNumber:2,scale:!0,axisLine:{show:!1},axisTick:{show:!0,lineStyle:{color:"#fff"}},splitLine:{show:!1,lineStyle:{type:"dotted",color:"#fff"}},boundaryGap:!1},yAxis:{type:"value",scale:!1,offset:10,show:!0,axisLabel:{show:!0,color:"#bbb"},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},series:{name:i.label,data:i.data,type:"line",smooth:!1,symbolSize:0,itemStyle:{normal:{lineStyle:{color:"#388cff"},color:"#388cff"}},areaStyle:{normal:{opacity:.2,color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#388cff"},{offset:1,color:"#fff"}])}}}};a.setOption(c),this.$nextTick(function(){t.renderQueue.push(e)})}},changeTab:function(t){var i=this;this.tabIndex=t,this.$nextTick(function(){i.renderChart()})}},mounted:function(){document.title="简要报告"}}),S=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.info.communityname?e("div",{staticClass:"cmt_page"},[e("div",{staticClass:"cmt_pic_wrapper"},[e("swiper",{attrs:{list:t.pics,"show-dots":!1,auto:"",height:"4.82rem"},model:{value:t.picIndex,callback:function(i){t.picIndex=i},expression:"picIndex"}}),t._v(" "),t.info.pictureUrlList?e("div",{staticClass:"cmt_pic_tips"},[t._v(t._s(t.picIndex+1)+"/"+t._s(t.pics.length))]):t._e()],1),t._v(" "),e("div",{staticClass:"cmt_block_1"},[e("div",{staticClass:"cmt_block_1_top vux-1px-b"},[e("div",{staticClass:"cmt_block_1_top_name"},[t._v(t._s(t.info.communityname))]),t._v(" "),e("div",{staticClass:"cmt_block_1_top_address"},[t._v(t._s(t.info.detailaddress||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_1_bottom"},[e("div",{staticClass:"cmt_block_1_bottom_item",staticStyle:{width:"50%"}},[e("div",{staticClass:"cmt_block_1_bottom_item_label"},[t._v("本月均价")]),t._v(" "),e("div",{staticClass:"cmt_block_1_bottom_item_val"},[t._v(t._s(t.community.similarHousesSalesqmprice||"--")+"元/㎡")])]),t._v(" "),e("div",{staticClass:"cmt_block_1_bottom_item",staticStyle:{width:"50%"}},[e("div",{staticClass:"cmt_block_1_bottom_item_label"},[t._v("出租均价")]),t._v(" "),e("div",{staticClass:"cmt_block_1_bottom_item_val"},[t._v(t._s(t.community.rentsqmprice||"--")+"元/月")])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.info.communityname,expression:"info.communityname"}],staticClass:"rb_block_1"},[e("i-progress-m",{attrs:{label:"均价超过"+t.community.cityName,val:t.community.cityScale}}),t._v(" "),e("i-progress-m",{staticStyle:{"margin-top":"0.3rem"},attrs:{label:"月增长超过"+t.community.cityName,val:t.community.differenceScale}})],1),t._v(" "),t.series&&t.series.length>0?e("div",{staticClass:"rb_block_2"},[e("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("均价走势")]),t._v(" "),e("m-chart",{attrs:{date:t.date,series:t.series,unit:"元/㎡"}})],1):t._e(),t._v(" "),t.info?e("div",{staticClass:"cmt_block_2"},[e("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("基本信息")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn"},[e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("建筑年代")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.buildyear||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("总户数")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.totalhouseholdcount||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("容积率")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.plotratio||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("停车位")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.parkingNum||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("绿化率")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.greeningrate?t.info.greeningrate+"%":""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item"},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("物业费")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.pmfee?t.info.pmfee+"元平米/月":""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item",staticStyle:{width:"100%"}},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("主力面积")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.mainArea?t.info.mainArea+"㎡":""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item",staticStyle:{width:"100%"}},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("开发商")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.developername||""))])]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item",staticStyle:{width:"100%"}},[e("div",{staticClass:"cmt_block_2_ctn_item_label"},[t._v("物业公司")]),t._v(" "),e("div",{staticClass:"cmt_block_2_ctn_item_val"},[t._v(t._s(t.info.companyname||""))])])])]):t._e(),t._v(" "),e("div",{staticClass:"rb_block_3"},[e("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("租金收益率")]),t._v(" "),e("div",{staticClass:"rb_block_3_ctn"},t._l(t.leaseRatioArray,function(i,s){return e("div",{key:s,staticClass:"rb_block_3_ctn_item"},[e("div",{staticClass:"rb_block_3_ctn_item_label"},[t._v(t._s(i.name))]),t._v(" "+t._s(i.val||"--")+"%\n            ")])}))]),t._v(" "),e("div",{staticClass:"rb_block_4"},[e("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("租金走势")]),t._v(" "),t.leaseTendSeries.length>0?e("div",{staticClass:"rb_block_4_ctn"},[e("div",{staticClass:"rb_block_4_tab"},t._l(t.leaseTendSeries,function(i,s){return e("div",{key:s,staticClass:"rb_block_4_tab_item",class:{rb_block_4_tab_item_active:s===t.tabIndex},on:{click:function(i){t.changeTab(s)}}},[t._v(t._s(i.label))])})),t._v(" "),t._l(t.leaseTendSeries,function(i,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:s===t.tabIndex,expression:"index === tabIndex"}],key:s,staticClass:"rb_block_4_chart_box"},[e("div",{ref:"leaseChart",refInFor:!0,staticClass:"rb_block_4_chart_box_inner"})])}),t._v(" "),e("div",{staticClass:"rb_block_4_chart_unit"},[t._v("(元/月)")])],2):t._e()]),t._v(" "),t.info.latitude&&t.info.longitude?e("div",{staticClass:"cmt_block_3"},[e("div",{staticClass:"cmt_block_title vux-1px-b"},[t._v("位置地图")]),t._v(" "),e("div",{staticClass:"cmt_block_3_ctn"},[e("div",{staticClass:"cmt_block_3_ctn_map_mask"}),t._v(" "),e("div",{staticClass:"cmt_block_3_ctn_maker"},[e("div",{staticClass:"cmt_block_3_ctn_maker_inner"},[e("div",{staticClass:"cmt_block_3_ctn_maker_inner_tit"},[t._v(t._s(t.info.communityname))]),t._v(" "),e("div",{staticClass:"cmt_block_3_ctn_maker_inner_address"},[t._v(t._s(t.info.detailaddress||""))])])]),t._v(" "),e("div",{staticClass:"cmt_block_3_ctn_map",attrs:{id:"rb_block_3_ctn_map"}})])]):t._e(),t._v(" "),e("div",{staticClass:"cmt_tool_bar vux-1px-t"},[e("div",{staticClass:"cmt_tool_bar_little_item vux-1px-r",on:{click:t.mark}},[1==t.isAtt?e("img",{attrs:{src:t.iconHeartActive,alt:""}}):e("img",{attrs:{src:t.iconHeart,alt:""}}),t._v(" "),e("span",[t._v(t._s(1==t.isAtt?"已关注":"关注"))])]),t._v(" "),e("div",{staticClass:"cmt_tool_bar_little_item",staticStyle:{width:"1.46rem"},on:{click:t.clickHouse}},[e("img",{attrs:{src:1==t.isHouse?t.iconSeeHouse:t.iconAdd,alt:""}}),t._v(" "),e("span",[t._v(t._s(1==t.isHouse?"查看房产":"添加房产"))])]),t._v(" "),1==t.isRepor?[e("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#ffbb38"},on:{click:function(i){t.showMenu=!0}}},[t._v("查看报告")]),t._v(" "),e("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#388cff"},on:{click:function(i){t.showBuyPop=!0}}},[t._v("订阅小区报告")])]:[e("div",{staticClass:"cmt_tool_bar_big_item",staticStyle:{"background-color":"#388cff",width:"4.6rem"},on:{click:function(i){t.showBuyPop=!0}}},[t._v("订阅小区报告")])]],2),t._v(" "),t.info.communityname?e("buy-pop",{attrs:{cid:t.communityId,tit:t.info.communityname,"pop-show":t.showBuyPop},on:{"on-hide":t.onPopHide}}):t._e(),t._v(" "),e("actionsheet",{attrs:{"show-cancel":"",menus:t.reportList},on:{"on-click-menu":t.selReport},model:{value:t.showMenu,callback:function(i){t.showMenu=i},expression:"showMenu"}})],1):t._e()};S._withStripped=!0;var L=e(1),R=Object(L.a)(I,S,[],!1,null,null,null);R.options.__file="src/pages/index/home/views/report_brief.vue";i.default=R.exports},44:function(t,i,e){"use strict";e(36),String,Array,Array;var s=["#00d0c2","#388cff","#f9354d"],a={name:"m-chart",data:function(){return{}},props:{unit:{type:String,default:"元/月"},date:{type:Array,default:[]},series:{type:Array,default:[]}},methods:{init:function(){if(0!=this.date.length&&0!=this.series.length){var t=this.$refs.iChartItem,i=echarts.init(t),e={grid:{left:70,bottom:25},tooltip:{show:!0},xAxis:{type:"category",data:this.date,offset:-13,axisLabel:{show:!0,color:"#bbb"},splitNumber:2,scale:!0,axisLine:{show:!1},axisTick:{show:!0,lineStyle:{color:"#fff"}},splitLine:{show:!1,lineStyle:{type:"dotted",color:"#fff"}},boundaryGap:!1},yAxis:{type:"value",scale:!1,offset:10,show:!0,axisLabel:{show:!0,color:"#bbb"},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},series:this.series.map(function(t,i){return{name:t.label,data:t.data,type:"line",smooth:!0,symbolSize:"5",itemStyle:{normal:{lineStyle:{color:s[i]},color:s[i]}}}})};i.setOption(e)}}},mounted:function(){this.init()}},c=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.date.length>0&&t.series.length>0?e("div",{staticClass:"m_chart"},[e("div",{ref:"iChartItem",staticClass:"m_chart_box"}),t._v(" "),t.unit?e("div",{staticClass:"m_chart_unit"},[t._v("("+t._s(t.unit)+")")]):t._e(),t._v(" "),e("div",{staticClass:"m_chart_lends"},[t._l(t.series,function(i,s){return[e("i",{key:s,staticClass:"dot",class:{dot_blue:0===s,dot_green:1===s,dot_red:2===s},style:{"margin-left":0!=s?"0.69rem":"0"}}),t._v(t._s(i.label)+"\n        ")]})],2)]):t._e()};c._withStripped=!0;var o=e(1),n=!1;var _=function(t){n||e(231)},l=Object(o.a)(a,c,[],!1,_,"data-v-c5554ca8",null);l.options.__file="src/components/m_chart.vue";i.a=l.exports},45:function(t,i,e){"use strict";e(167),Number,String;var s={name:"i-progress-m",data:function(){return{rate:this.val}},props:{val:{type:Number,default:0},label:{type:String,default:""}},computed:{w:function(){return this.val?this.val+"%":0}},mounted:function(){}},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"i_progress_m"},[e("div",{staticClass:"i_progress_m_title"},[t._v("\n        "+t._s(t.label)+" "),e("span",{staticClass:"i_progress_m_title_span"},[t._v(t._s(t.val)+"%")]),t._v("的小区\n    ")]),t._v(" "),e("div",{staticClass:"i_progress_m_container"},[e("div",{staticClass:"i_progress_m_container_dvider",staticStyle:{left:"33.3%"}}),t._v(" "),e("div",{staticClass:"i_progress_m_container_dvider",staticStyle:{right:"33.3%"}}),t._v(" "),e("div",{staticClass:"i_progress_m_content",style:{width:t.w}})]),t._v(" "),t._m(0)])};a._withStripped=!0;var c=e(1),o=Object(c.a)(s,a,[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"i_progress_m_label"},[i("div",{staticClass:"i_progress_m_label_l"},[this._v("低")]),this._v(" "),i("div",{staticClass:"i_progress_m_label_r"},[this._v("高")])])}],!1,null,null,null);o.options.__file="src/components/progress_m.vue";i.a=o.exports},47:function(t,i,e){t.exports=e.p+"assets/img/cmt-default-pic.5f94a4f.jpg"}}]);
//# sourceMappingURL=15.d2511d2.js.map