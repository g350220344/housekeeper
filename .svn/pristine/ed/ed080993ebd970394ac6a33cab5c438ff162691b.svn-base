(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{141:function(t,i){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},216:function(t,i,e){},225:function(t,i,e){(function(i){var e="Expected a function",n=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof i&&i&&i.Object===Object&&i,h="object"==typeof self&&self&&self.Object===Object&&self,y=l||h||Function("return this")(),m=Object.prototype.toString,d=Math.max,p=Math.min,A=function(){return y.Date.now()};function f(t,i,n){var r,s,o,c,a,u,l=0,h=!1,y=!1,m=!0;if("function"!=typeof t)throw new TypeError(e);function f(i){var e=r,n=s;return r=s=void 0,l=i,c=t.apply(n,e)}function g(t){var e=t-u;return void 0===u||e>=i||e<0||y&&t-l>=o}function I(){var t=A();if(g(t))return w(t);a=setTimeout(I,function(t){var e=i-(t-u);return y?p(e,o-(t-l)):e}(t))}function w(t){return a=void 0,m&&r?f(t):(r=s=void 0,c)}function N(){var t=A(),e=g(t);if(r=arguments,s=this,u=t,e){if(void 0===a)return function(t){return l=t,a=setTimeout(I,i),h?f(t):c}(u);if(y)return a=setTimeout(I,i),f(u)}return void 0===a&&(a=setTimeout(I,i)),c}return i=b(i)||0,v(n)&&(h=!!n.leading,o=(y="maxWait"in n)?d(b(n.maxWait)||0,i):o,m="trailing"in n?!!n.trailing:m),N.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=s=a=void 0},N.flush=function(){return void 0===a?c:w(A())},N}function v(t){var i=typeof t;return!!t&&("object"==i||"function"==i)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&m.call(t)==r}(t))return n;if(v(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=v(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var e=c.test(t);return e||a.test(t)?u(t.slice(2),e?2:8):o.test(t)?n:+t}t.exports=function(t,i,n){var r=!0,s=!0;if("function"!=typeof t)throw new TypeError(e);return v(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),f(t,i,{leading:r,maxWait:i,trailing:s})}}).call(this,e(141))},416:function(t,i,e){"use strict";e.r(i);var n=e(63),r=e(49),s=e.n(r),o=e(48),c=e.n(o),a=e(2),u=e(0),l=e.n(u),h=(e(216),(Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t})({},Object(a.mapState)({city:function(t){return t.glb.curCity},formCity:function(t){return t.glb.formCity},user:function(t){return t.glb.user}}),{validCity:function(){return 1==this.type?this.city:this.formCity.cityName?this.formCity:this.city}}),{name:"search",data:function(){return{iconArrowDown:s.a,iconBin:c.a,type:1,resHeight:0,showHistory:!0,history:[],list:[],searchKey:""}},computed:(Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t})({},Object(a.mapState)({city:function(t){return t.glb.curCity},formCity:function(t){return t.glb.formCity},user:function(t){return t.glb.user}}),{validCity:function(){return 1==this.type?this.city:this.formCity.cityName?this.formCity:this.city}}),methods:{cancel:function(){this.$router.go(-1)},changeCity:function(){this.$router.push({path:"/city",query:{type:this.type}})},load:function(){var t=this;this.$http({url:"WxCommunity/searchCommunity",method:"post",data:{cityId:this.validCity.cityId,communityName:this.searchKey}}).then(function(i){var e=i.data.data;e&&e.length>0?t.list=l.a.cloneDeep(e):t.list=[]})},onClick:function(t){if(console.log(t.communityId),this.user){var i=localStorage.getItem("his_"+this.user.userId);if(i){i=JSON.parse(i);var e=-1;for(var n in i)if(i[n].communityId==t.communityId){e=n;break}e>-1?i.splice(e,1):5==i.length&&(i.length=4),i.unshift(t),console.log("_his:  ",i),localStorage.setItem("his_"+this.user.userId,JSON.stringify(i))}else localStorage.setItem("his_"+this.user.userId,JSON.stringify([t]));this.sub(t)}else this.sub(t)},onClickHistory:function(t){this.sub(t)},clearHis:function(){this.history.length>0&&(localStorage.removeItem("his_"+this.user.userId),this.history=[])},sub:function(t){if(2==this.type){if(this.$store.commit("updateFormCommunityStatus",t),this.formCity.cityId!=t.cityId){var i=l.a.cloneDeep(this.formCity);i.cityId=t.cityId,i.cityName=t.cityName,i.districtId=t.districtId,i.districtName=t.districtName,this.$store.commit("updateFormCityStatus",i)}this.$router.go(-1)}else if(3==this.type){if(this.$store.commit("updateFormCommunityStatus",t),this.formCity.cityId!=t.cityId){var e=l.a.cloneDeep(this.formCity);e.cityId=t.cityId,e.cityName=t.cityName,e.districtId=t.districtId,e.districtName=t.districtName,this.$store.commit("updateFormCityStatus",e)}console.log(t),this.$router.replace({path:"addHouse",query:this.$route.query.data})}else this.$router.push({path:"/community",query:{communityId:t.communityId,communityname:t.communityname}})}},watch:{searchKey:function(t){var i=Object(n.a)(this.load,500,{trailing:!0});t?(this.showHistory=!1,i()):(this.showHistory=!0,this.list.length=0)}},created:function(){if(console.log("query searchkey:  ",this.$route.query.key),this.type=this.$route.query.type,this.user){var t=localStorage.getItem("his_"+this.user.userId);t&&(this.history=JSON.parse(t))}},mounted:function(){document.title="搜索小区",this.resHeight=document.body.clientHeight-this.$refs.inputBox.clientHeight+"px",3==this.type&&(this.searchKey=this.$route.query.key)}}),y=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{height:"100%",overflow:"hidden",background:"#fff"}},[e("div",{ref:"inputBox",staticClass:"search_input_box vux-1px-b"},[e("div",{staticClass:"search_input_box_city",on:{click:t.changeCity}},[t._v("\n            "+t._s(t.validCity.cityName)),e("img",{staticClass:"search_input_box_city_icon",attrs:{src:t.iconArrowDown,alt:""}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"search_input_box_inner",attrs:{type:"text",placeholder:"搜索小区/地址"},domProps:{value:t.searchKey},on:{input:function(i){i.target.composing||(t.searchKey=i.target.value)}}}),t._v(" "),e("div",{staticClass:"search_input_box_cancel",on:{click:t.cancel}},[t._v("取消")])]),t._v(" "),e("div",{staticClass:"search_scroll_wrap",style:{height:t.resHeight}},[t.showHistory&&t.history.length>0?e("div",{staticClass:"search_history_box"},[e("div",{staticClass:"search_history_box_tool"},[t._v("\n                搜索历史\n                "),e("img",{attrs:{src:t.iconBin,alt:""},on:{click:t.clearHis}})]),t._v(" "),e("ul",t._l(t.history,function(i){return e("li",{key:i.id,on:{click:function(e){t.onClickHistory(i)}}},[t._v(t._s(i.communityname)+" "),e("span",[t._v("("+t._s(i.cityName)+")")])])}))]):t._e(),t._v(" "),t.list.length>0?e("ul",{staticClass:"search_res_box vux-1px-b"},t._l(t.list,function(i){return e("li",{key:i.communityId,staticClass:"search_res_item vux-1px-b",on:{click:function(e){t.onClick(i)}}},[e("div",{staticClass:"search_res_item_name"},[t._v(t._s(i.communityname))]),t._v(" "),e("div",{staticClass:"search_res_item_address"},[t._v(t._s(i.detailaddress||""))])])})):t._e()])])};y._withStripped=!0;var m=e(1),d=Object(m.a)(h,y,[],!1,null,null,null);d.options.__file="src/pages/index/home/views/search.vue";i.default=d.exports},48:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAbCAYAAABiFp9rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMDIyNjM5MTkzRDYxMUU4QkFFMUQ5REVGMkUzNUYwOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMDIyNjM5MjkzRDYxMUU4QkFFMUQ5REVGMkUzNUYwOSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUwMjI2MzhGOTNENjExRThCQUUxRDlERUYyRTM1RjA5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUwMjI2MzkwOTNENjExRThCQUUxRDlERUYyRTM1RjA5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+aoN4HAAAAWFJREFUeNpi3L17NwMRYDEQx+CQ83BxcdlJyAAWIFYBYgkg/oVDzV8g5sBjht6ePXveAmkmHPLsQPwYZNECILZmIB90EaFmLciiJ1DfMOJQxAiV/4tDng2ImYH4Pw75f0D8HGRRIhCnIglSE8CC8zfIou+UmARMCESpY0FiiwFxBzSoiPYZMCHg8gkoKIuBDnmPbpEINBipCZqB+D0DWpL8xUB98Bs9smgOWAjIPwPil0AsDsRS0IRzF5qc1aD0cyB+AcTS0HjGm/xwgTwgNoLSIHAeiHWBWAsW9kBQAoxwI2h8MJBr0V80+j8RasiyiAONZkYrMZDl2CmxiOpFxKhFoxYRtOgzGv0HSQ6Wp75A6a+UFEGgIoUXqWhhh/KRHSkCrCpAYkKUWDQViCciqQMVNU+hbB4oPQGIu6FVOtkWcaLxmZF8hFx6cAzKxMBOA/NZsQXdayCeT2WLPsAYAAEGAPXmQsLrpcz0AAAAAElFTkSuQmCC"},49:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAYAAAD37n+BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNDQ5QUVBMjkzRDYxMUU4QTU5NUY4QTI5QkE1NDMyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNDQ5QUVBMzkzRDYxMUU4QTU5NUY4QTI5QkE1NDMyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU0NDlBRUEwOTNENjExRThBNTk1RjhBMjlCQTU0MzJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU0NDlBRUExOTNENjExRThBNTk1RjhBMjlCQTU0MzJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hpp+xAAAAElJREFUeNpi3L17dy0DA0MTA3GgngVINEM5hDTVgdQyQTnNUAG8ikEMJiRBXJrqkFyBogGbJhTFIMCCxUSQgv9AzIiuGAQAAgwA5lAN0a9RC8IAAAAASUVORK5CYII="},63:function(t,i,e){"use strict";var n=e(225),r=e.n(n);i.a=r.a}}]);
//# sourceMappingURL=33.4be68a8.js.map